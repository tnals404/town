<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="Dao.ChatDAO">
	<select id="checkNull" parameterType="messagedto" resultType="messagedto">
	select * from chat_message where (member_id = #{member_id} and touser_id = #{touser_id})
	or (touser_id = #{member_id} and member_id = #{touser_id}) 
	order by message_sendAt ASC ;
	</select>
	
	<insert id="createChatroom" parameterType="chatroomdto">
	INSERT INTO chat_room() VALUES ();
	<selectKey resultType="int" keyProperty="chat_id" order="AFTER">
        SELECT LAST_INSERT_ID()
        </selectKey>
	</insert>
	
	<insert id="insertMessage" parameterType="messagedto">
	INSERT INTO chat_message() VALUES (default, #{message_content}, default, #{member_id}, #{chat_id}, #{touser_id});
	</insert>
  </mapper>